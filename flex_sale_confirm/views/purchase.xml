<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

<!--        <record id="purchase_order_kpis_tree_inherit" model="ir.ui.view">-->
<!--            <field name="name">purchase_order_kpis_tree_inherit</field>-->
<!--            <field name="model">purchase.order</field>-->
<!--            <field name="inherit_id" ref="purchase.purchase_order_kpis_tree"/>-->
<!--            <field name="arch" type="xml">-->
<!--                <xpath expr="//field[@name='name']" position="replace">-->
<!--                    <field name="name" string="RFQ Ref" readonly="1" decoration-bf="1"/>-->
<!--                    <field name="po_name" readonly="1" decoration-bf="1"/>-->
<!--                </xpath>-->
<!--            </field>-->
<!--        </record>-->

        <record id="purchase_order_form_inherit" model="ir.ui.view">
            <field name="name">purchase_order_form_inherit</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
<!--                <xpath expr="//field[@name='name']" position="replace">-->
<!--                    <field name="name" readonly="1" attrs="{'invisible': [('po_name', '!=', False)]}"/>-->
<!--                    <field name="po_name" readonly="1" attrs="{'invisible': [('po_name', '=', False)]}"/>-->
<!--                </xpath>-->
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="statusbar_visible">draft,sent,submit,finance,gm,purchase</attribute>
                </xpath>
                <xpath expr="//button[@id='bid_confirm']" position="attributes">
                    <attribute name="states">gm</attribute>
                    <attribute name="groups">flex_sale.group_purchase_confirm</attribute>
                </xpath>
                <xpath expr="//button[@id='draft_confirm']" position="replace"></xpath>
                <xpath expr="//button[@name='button_cancel']" position="attributes">
                    <attribute name="states">draft,sent,submit,finance,gm,to approve,purchase</attribute>
                </xpath>
                <xpath expr="//header/button[1]" position="before">

                    <button name="action_submit" type="object" invisible="states not in ('draft', 'sent')" string="Submit Approval"
                            class="oe_highlight" groups="flex_sale.group_purchase_submit"/>

                    <button name="action_finance" type="object" invisible="states not in ('submit')"  string="Financial Approval"
                            class="oe_highlight" groups="flex_sale.group_purchase_finance"/>

                    <button name="action_gm" type="object" invisible="states not in ('finance')"  string="GM Approval"
                            class="oe_highlight" groups="flex_sale.group_purchase_gm"/>
                </xpath>
                <xpath expr="//field[@name='id']" position="after">
                    <field name="po_version" readonly="1"/>
                </xpath>

                <field name="partner_id" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>

                <field name="partner_ref" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>

                <field name="currency_id" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>

                <field name="date_approve" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>


                <field name="date_planned" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>


                <field name="picking_type_id" position="attributes">
                    <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>
                </field>


                <field name="order_line" position="attributes">
                    <attribute name="attrs">{'invisible': [('state', 'in', ('purchase', 'to approve','done',
                        'cancel','finance','gm'))]}
                    </attribute>


                    <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>
                    <xpath expr="//field[@name='order_line']/tree/field[@name='date_planned']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>
                    <xpath expr="//field[@name='order_line']/tree/field[@name='product_qty']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>
                    <xpath expr="//field[@name='order_line']/tree/field[@name='qty_received']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>

                    <xpath expr="//field[@name='order_line']/tree/field[@name='qty_invoiced']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>

                    <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>

                    <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>
                    <xpath expr="//field[@name='order_line']/tree/field[@name='taxes_id']" position="attributes">
                        <attribute name="attrs">{'readonly': [('state', 'in', ('purchase', 'to approve','done',
                            'cancel','finance','gm'))]}
                        </attribute>
                    </xpath>
                </field>


            </field>
        </record>

    </data>
</odoo>