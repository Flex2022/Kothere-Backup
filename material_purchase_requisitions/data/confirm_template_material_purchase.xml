<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Manager approval email -->
        <record id="email_confirm_material_purchase_requistion" model="mail.template">
            <field name="name">Request for Material Purchase Requisition - Send by Email</field>
            <field name="model_id" ref="material_purchase_requisitions.model_material_purchase_requisition"/>
            <field name="email_from">${object.employee_id.work_email or user.email}</field>
            <field name="email_to">
                ${object.employee_id.parent_id.sudo().work_email or
                  (object.employee_id.department_id and object.employee_id.department_id.sudo().manager_id and object.employee_id.department_id.sudo().manager_id.work_email) or ''}
            </field>
            <field name="subject">Request for Material Purchase Requisition - ${object.name}</field>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.employee_id.user_id.lang or user.lang}</field>
            <field name="body_html"><![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size:12px; color:#222; background-color:#FFF;">
  <p>
    Dear
    ${object.employee_id.parent_id.sudo().name or
      (object.employee_id.department_id and object.employee_id.department_id.sudo().manager_id and object.employee_id.department_id.sudo().manager_id.name) or 'Sir/Madam'},
  </p>

  <p>Please approve the Purchase Requisition - <strong>${object.name}</strong>.</p>
  <p>Thank you,</p>
  <br/>

  <div style="width:375px; margin:0; padding:0; background-color:#8E0000; border-top-left-radius:5px; border-top-right-radius:5px; background-repeat:repeat no-repeat;">
    <h3 style="margin:0; padding:2px 14px; font-size:12px; color:#DDD;">
      <strong style="text-transform:uppercase;">${user.company_id.name}</strong>
    </h3>
  </div>

  <div style="width:347px; margin:0; padding:5px 14px; line-height:16px; background-color:#F2F2F2;">
    <span style="color:#222; margin-bottom:5px; display:block;">
      ${user.company_id.partner_id.sudo().with_context(show_address=True, html_format=True).name_get()[0][1] | safe}
    </span>

    % if user.company_id.phone:
      <div>Phone:&nbsp; ${user.company_id.phone}</div>
    % endif

    % if user.company_id.website:
      <div>Web:&nbsp; <a href="${user.company_id.website}">${user.company_id.website}</a></div>
    % endif
  </div>
</div>
      ]]></field>
        </record>

        <!-- Purchase team email -->
        <record id="email_purchase_requisition" model="mail.template">
            <field name="name">Approval Request for Purchase Requisition to Purchase User - Send by Email</field>
            <field name="model_id" ref="material_purchase_requisitions.model_material_purchase_requisition"/>
            <field name="email_from">${object.employee_id.work_email or user.email}</field>
            <field name="email_to">
                ${object.requisiton_responsible_id and object.requisiton_responsible_id.work_email or ''}
            </field>
            <field name="subject">Approval Request for Purchase Requisition to Purchase User - ${object.name}</field>
            <field name="auto_delete" eval="True"/>
            <field name="lang">${object.employee_id.user_id.lang or user.lang}</field>
            <field name="body_html"><![CDATA[
<div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size:12px; color:#222; background-color:#FFF;">
  <p>Dear ${object.requisiton_responsible_id and object.requisiton_responsible_id.name or 'Sir/Madam'},</p>

  <p>Please approve the Purchase Requisition - <strong>${object.name}</strong>.</p>
  <p>Thank you,</p>
  <br/>

  <div style="width:375px; margin:0; padding:0; background-color:#8E0000; border-top-left-radius:5px; border-top-right-radius:5px; background-repeat:repeat no-repeat;">
    <h3 style="margin:0; padding:2px 14px; font-size:12px; color:#DDD;">
      <strong style="text-transform:uppercase;">${user.company_id.name}</strong>
    </h3>
  </div>

  <div style="width:347px; margin:0; padding:5px 14px; line-height:16px; background-color:#F2F2F2;">
    <span style="color:#222; margin-bottom:5px; display:block;">
      ${user.company_id.partner_id.sudo().with_context(show_address=True, html_format=True).name_get()[0][1] | safe}
    </span>

    % if user.company_id.phone:
      <div>Phone:&nbsp; ${user.company_id.phone}</div>
    % endif

    % if user.company_id.website:
      <div>Web:&nbsp; <a href="${user.company_id.website}">${user.company_id.website}</a></div>
    % endif
  </div>
</div>
      ]]></field>
        </record>

    </data>
</odoo>
