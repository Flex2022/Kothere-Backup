<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="hr_equipment_request_view_form_inherit" model="ir.ui.view">
            <field name="name">maintenance.request.view.form.inherit.mrp</field>
            <field name="model">maintenance.request</field>
            <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='equipment_id']" position="before">
                    <field name="vehicle_id" invisible="maintenance_for!= 'vehicle'"
                           required="maintenance_for == 'vehicle'"/>
                    <field name="license_plate" invisible="maintenance_for!= 'vehicle'"
                           required="maintenance_for == 'vehicle'"/>
                    <field name="driver_id" invisible="maintenance_for!= 'vehicle'"
                           required="maintenance_for == 'vehicle'"/>
                </xpath>
                <xpath expr="//field[@name='equipment_id']" position="attributes">
                    <attribute name="invisible">maintenance_for != 'equipment'</attribute>
                    <attribute name="required">maintenance_for != 'equipment'</attribute>
                </xpath>
                <xpath expr="//field[@name='priority']" position="before">
                    <label for="hours_number" string="Repair every" invisible="not recurring_maintenance"/>
                    <div class="o_inline" invisible="not recurring_maintenance">
                        <field name="hours_number" widget="float_time" placeholder="Hours" class="ms-0"
                               style="width: fit-content;"/>
                        <span>hours</span>
                    </div>

                    <label for="kilometres_number" string="and" class="ms-0" style="width: fit-content;"
                           invisible="not recurring_maintenance"/>
                    <div class="o_inline" invisible="not recurring_maintenance">
                        <field name="kilometres_number" widget="float" placeholder="Kilometers" class="ms-0"
                               style="width: fit-content;"/>
                        <span>kilometers</span>
                    </div>

                    <label for="actual_hours_number"  invisible="not recurring_maintenance"/>
                    <div class="o_inline" invisible="not recurring_maintenance">
                        <field name="actual_hours_number" widget="float_time" placeholder="Hours" class="ms-0"
                               style="width: fit-content;"/>
                        <span>hours</span>
                    </div>

                    <label for="actual_kilometres_number" class="ms-0" style="width: fit-content;"
                           invisible="not recurring_maintenance"/>
                    <div class="o_row o_hr_narrow_field" invisible="not recurring_maintenance">
                        <field name="actual_kilometres_number" widget="float" placeholder="Kilometers" class="ms-0"
                               style="width: fit-content;"/>
                        <field name="odometer_unit"/>
                    </div>
                </xpath>
                <xpath expr="//field[@name='workcenter_id']" position="replace">
                    <field name="workcenter_id" invisible="maintenance_for!= 'workcenter'"
                           required="maintenance_for == 'workcenter'"/>
                </xpath>

                <xpath expr="//label[@for='block_workcenter']" position="replace">
                    <label for="block_workcenter" invisible="maintenance_for != 'workcenter'"/>
                </xpath>
                <xpath expr="sheet/group/group[2]/div[4]" position="replace">
                    <div class="d-inline-flex" invisible="maintenance_for != 'workcenter'">
                        <field name="block_workcenter" nolabel="1" class="ms-0" style="width: fit-content;"/>
                    </div>
                </xpath>
                <xpath expr="//field[@name='recurring_leaves_count']" position="replace">
                    <field name="recurring_leaves_count"
                           invisible="maintenance_for != 'workcenter' or not recurring_maintenance or not block_workcenter"
                           groups="base.group_no_one"/>
                </xpath>
                <xpath expr="//button[@name='reset_equipment_request']" position="after">
                    <button name="create_repair_order" string="Create Repair Order" type="object"
                            invisible="repair_count > 0"/>
                </xpath>
                <xpath expr="//sheet/div[1]" position="before">
                    <div name="button_box" class="oe_button_box">
                        <button type="object" name="get_repair_order" class="oe_stat_button" icon="fa-building">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_value" widget="statinfo">
                                    <field name="repair_count" widget="statinfo" nolabel="1" class="mr4"
                                           readonly="1"/>
                                </span>
                                <span class="o_stat_text">Repair</span>
                            </div>
                        </button>
                    </div>
                </xpath>
            </field>
        </record>

    </data>
</odoo>