<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_new_invoice">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="flex_additions_deductions.report_layout">
                    <link rel="stylesheet" href="/flex_additions_deductions/static/src/css/style.css"/>
                    <div dir="rtl" class="row">
                        <div class="col-4 text-end">
                            <u>
                                <span style="font-size:13px;">نسبة الانجاز الفعلية:</span>
                            </u>
                        </div>
                        <div class="col-4 text-center">
                            <u>
                                <span style="font-size:13px;">8.82</span>
                            </u>
                        </div>

                    </div>
                    <br/>
                    <table dir="rtl">
                        <tr>
                            <td class="size1">
                                م
                            </td>
                            <td class="size2">
                                بيان الأعمال
                            </td>
                            <td class="size4">
                                الوحدة
                            </td>
                            <td class="size3">
                                الكمية

                            </td>
                            <td class="size4">
                                سعر الوحدة
                            </td>
                            <td class="size4">
                                المنجز سابقا
                            </td>
                            <td class="size4">
                                المنجز الحاليا
                            </td>
                            <td class="size4">
                                اجمالي المنجز
                            </td>
                            <td class="size4">
                                السعر
                            </td>
                        </tr>
                        <t t-set="current_subtotal" t-value="0"/>
                        <t t-set="lines"
                           t-value="o.invoice_line_ids.sorted(key=lambda l: (-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                        <t t-foreach="lines" t-as="line">
                            <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"/>
                            <tr t-att-class="'bg-200 fw-bold o_line_section' if line.display_type == 'line_section' else 'fst-italic o_line_note' if line.display_type == 'line_note' else ''">
                                <t t-if="line.display_type == 'product'"
                                   name="account_invoice_line_accountable">
                                    <td class="size1">
                                        <span t-field="line.line_number"/>
                                    </td>
                                    <td class="size2">
                                        <!--                                        اعمال الالكتروميكانيك والتشطيبات-->
                                        <span t-field="line.product_id"/>
                                    </td>
                                    <td class="size4">

                                        <span t-field="line.product_uom_id"/>
                                        <!--                                        عدد-->
                                    </td>
                                    <td class="size3">
                                        <span t-field="line.quantity"/>
                                        <!--                                        34-->
                                    </td>
                                    <td class="size4">
                                        <span t-field="line.price_unit"/>
                                        <!--                                        303160-->
                                    </td>
                                    <td class="size4">
                                        <span t-field="line.previous_accomplishment"/>
                                    </td>
                                    <td class="size4">
                                        <span t-field="line.current_accomplishment"/>
                                    </td>
                                    <td class="size4">
                                        <span t-field="line.total_accomplishment"/>
                                    </td>
                                    <td class="size4">
                                        <span t-field="line.price_total"/>
                                    </td>
                                </t>
                            </tr>
                        </t>
                        <t t-if="line.display_type == 'line_section'">
                            <td colspan="99" class="text-center">
                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                            </td>
                            <t t-set="current_section" t-value="line"/>
                            <t t-set="current_subtotal" t-value="0"/>
                        </t>
                        <t t-if="line.display_type == 'line_note'">
                            <td colspan="99" class="text-center">
                                <span t-field="line.name" t-options="{'widget': 'text'}"/>
                            </td>
                        </t>
                        <tr>
                            <td class="size1">

                            </td>
                            <td class="size2" style="border-left:none">
                                <div class="col-4" style="margin-right:150px;width:180px;">
                                    <span>اجمالي قيمة الاعمال</span>
                                </div>
                            </td>
                            <td class="size4" style="border-right:none;border-left:none">


                            </td>
                            <td class="size3" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                            <td class="size4" style="border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">
                                <span t-field="o.amount_untaxed"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="size1">

                            </td>
                            <td class="size2" style="border-left:none">

                            </td>
                            <td class="size4" style="border-right:none;border-left:none">


                            </td>
                            <td class="size3" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">
                                <span>الحسميات</span>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                        </tr>
                        <tr>
                            <td class="size1">
                                1
                            </td>
                            <td class="size2" style="border-left:none">
                                <div class="text-center" style="width:330px;">
                                    <span>خصم نسبة 10% قيمة الدفعة المقدمة شاملا ضريبة القيمة المضافة</span>
                                </div>


                            </td>
                            <td class="size4" style="border-right:none;border-left:none">

                            </td>
                            <td class="size3" style="border-right:0px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">
                                <span t-field="o.deductions_amount_type_discounts"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                        </tr>
                        <tr>
                            <td class="size1">
                                2
                            </td>
                            <td class="size2" style="border-left:none">
                                <div class="text-end" style="margin-right:120px;width:200px;">خصم نسبة 5% ضمان أعمال
                                </div>
                            </td>
                            <td class="size4" style="border-left:none;border-right:none">

                            </td>
                            <td class="size3" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-left:none">
                                <span t-field="o.deductions_amount_type_business_guarantee"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                        </tr>
                        <tr>
                            <td class="size1">
                                3
                            </td>
                            <td class="size2" style="border-left:none">
                                <div class="text-center" style="width:330px;">
                                    <span>خصم نسبة المنجز من قيمة توريدات مواد العزل شاملة ضريبة القيمة المضافة</span>
                                </div>
                            </td>
                            <td class="size4" style="border-right:none;border-left:none">

                            </td>
                            <td class="size3" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-left:none">
                                <span t-field="o.deductions_amount_type_insurances"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                        </tr>
                        <tr>
                            <td class="size1">
                                4
                            </td>
                            <td class="size2" style="border-left:none">
                                <div class="text-end" style="margin-right:120px;width:200px;">اجمالي المحسوبات</div>
                            </td>
                            <td class="size4" style="border-right:none;border-left:none">

                            </td>
                            <td class="size3" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-left:none">
                                <span t-field="o.deductions_amount"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none">


                            </td>
                            <td class="size4" style="border-right:0px;">


                            </td>
                        </tr>
                        <tr style="width:50px;">
                            <td class="size1" style="width:50px;">

                            </td>
                            <td class="size2" style="border-left:none;width:50px;">
                                <div class="col-4" style="margin-right:120px;width:180px;font-size:14px;">
                                    <u>
                                        <span>اجمالي قيمة المستخلص</span>
                                    </u>
                                </div>
                            </td>
                            <td class="size4" style="border-right:none;border-left:none;width:50px;">


                            </td>
                            <td class="size3" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">
                                <span t-field="o.total_deductions"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                        </tr>
                        <tr style="width:50px;">
                            <td class="size1" style="width:50px;">

                            </td>
                            <td class="size2" style="border-left:none;width:50px;">
                                <div class="col-4" style="margin-right:120px;width:180px;font-size:14px;">
                                    <u>
                                        <span>اجمالي ضريبة القيمة المضافة</span>
                                    </u>
                                </div>

                            </td>
                            <td class="size4" style="border-right:none;border-left:none;width:50px;">


                            </td>
                            <td class="size3" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">
                                <span t-field="o.amount_tax"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                        </tr>
                        <tr style="width:50px;">
                            <td class="size1" style="width:50px;">

                            </td>
                            <td class="size2" style="border-left:none;width:50px;">
                                <div class="col-4" style="margin-right:100px;width:250px;font-size:14px;">
                                    <u>
                                        <span>اجمالي قيمة المستحق صرفه شامل ضريبة القيمة المضافة</span>
                                    </u>
                                </div>
                            </td>
                            <td class="size4" style="border-right:none;border-left:none;width:50px;">


                            </td>
                            <td class="size3" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">
                                <span t-field="o.amount_total"/>
                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;border-left:none;width:50px;">


                            </td>
                            <td class="size4" style="border-right:0px;width:50px;">


                            </td>
                        </tr>
                    </table>
                    <div class="col-12 border border-dark text-center" style="height:30px;border-top:none;" dir="rtl">
                        <span>فقط</span>(<span
                            t-esc="o.currency_id.with_context(lang='ar_001').amount_to_text(o.amount_total)"/>)
                        <span>لا غير</span>
                    </div>
                    <br/>
                    <div class="row" rtl="rtl">
                        <div class="col-auto col-3 mw-100 mb-2 text-center" dir="rtl">
                            <span style="font-size: 14px;">اعتماد مدير المشاريع م/محمد أبو السعود</span>
                            <!--                            <p class="m-0" t-field="o.po_number"/>-->
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2 text-center" dir="rtl">
                            <span style="font-size: 14px;">مدير المشروع م/احمد حسني</span>
                            <!--                            <p class="m-0" t-field="o.supplier"/>-->
                        </div>

                        <div class="col-auto col-3 mw-100 mb-2 text-center" dir="rtl">
                            <span style="font-size: 14px;">المقاول/شركة رؤية الجيل العاشر للتجارة والمقاولات</span>
                            <!--                            <p class="m-0" t-field="o.invoice_origin"/>-->
                        </div>
                    </div>
                    <br/>
                    <div class="row" rtl="rtl">
                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">التوقيع</span>
                            <!--                            <p class="m-0" t-field="o.po_number"/>-->
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">التوقيع</span>
                            <!--                            <p class="m-0" t-field="o.supplier"/>-->
                        </div>

                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">يمثلها</span>
                            <!--                            <p class="m-0" t-field="o.invoice_origin"/>-->
                        </div>
                    </div>
                    <br/>
                    <div class="row" rtl="rtl">
                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">المدير المالي/باسل عبد السميع</span>
                            <!--                            <p class="m-0" t-field="o.po_number"/>-->
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">المحاسب/نادر سليم</span>
                            <!--                            <p class="m-0" t-field="o.supplier"/>-->
                        </div>

                        <div class="col-auto col-3 mw-100 mb-2 text-center">
                            <span style="font-size: 14px;">عيسى الصباح</span>
                            <!--                            <p class="m-0" t-field="o.invoice_origin"/>-->
                        </div>
                    </div>
                    <br/>
                    <div class="row" rtl="rtl">
                        <div class="col-auto col-3 mw-100 mb-2 text-end">
                            <span style="font-size: 14px;">التوقيع</span>
                            <!--                            <p class="m-0" t-field="o.po_number"/>-->
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2 text-end">
                            <span style="font-size: 14px;">التوقيع</span>
                            <!--                            <p class="m-0" t-field="o.supplier"/>-->
                        </div>

                        <div class="col-auto col-3 mw-100 mb-2 text-end">
                            <span style="font-size: 14px;">التوقيع</span>
                            <!--                            <p class="m-0" t-field="o.invoice_origin"/>-->
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
    <record id="paperformat_report_new" model="report.paperformat">
        <field name="name">A4 - Custom Report New</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="page_height">0</field>
        <field name="page_width">0</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">80</field>
        <field name="margin_bottom">32</field>
        <field name="margin_left">7</field>
        <field name="margin_right">7</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">40</field>
        <field name="dpi">90</field>
    </record>
    <record id="report_new_in_invoice" model="ir.actions.report">
        <field name="name">مستخلص مقاول باطن</field>
        <field name="model">account.move</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">flex_additions_deductions.report_new_invoice</field>
        <field name="report_file">flex_additions_deductions.report_new_invoice</field>
        <field name="binding_model_id" ref="sale.model_account_move"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="paperformat_report_new"/>
    </record>


</odoo>